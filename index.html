<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Be My Valentine ‚ù§Ô∏è</title>

<style>
  * { box-sizing: border-box; margin: 0; padding: 0; }

  body{
    min-height: 100vh;
    position: relative;
    background:
      linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)),
      url("https://i.imgur.com/2LsIKFl.jpeg");
    background-repeat: no-repeat;
    background-size: cover;
    background-position: top center;

    display: flex;
    align-items: flex-end;
    justify-content: center;
    padding-bottom: 250px;

    overflow: hidden;
    font-family: Arial, sans-serif;
    color: white;
  }

  @media (min-width: 900px) {
    body { background-position: center top; }
  }

  .card{
  background: rgba(255,255,255,0.15);
  backdrop-filter: blur(10px);
  padding: 30px;
  border-radius: 20px;
  text-align: center;

  max-width: 90%;
  width: 520px;
  height: 280px; /* üëà LOCK HEIGHT (instead of min-height) */

  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 18px;

  position: relative;
  z-index: 5;
}


  /* temporarily disable blur during the success animation (reduces stutter) */
  .card.no-blur{
    backdrop-filter: none !important;
  }

  h1{
    transition: opacity 0.6s ease, transform 0.6s ease;
  }

  .buttons{
    display: flex;
    gap: 40px;
    justify-content: center;
    transition: opacity 0.6s ease, transform 0.6s ease;
  }

  button{
    padding: 14px 32px;
    font-size: 18px;
    border: none;
    border-radius: 30px;
    cursor: pointer;
    transition: opacity 0.8s ease, transform 0.8s ease;
    user-select: none;
    -webkit-tap-highlight-color: transparent;
  }

  #yesBtn{
    background: #ff4d6d;
    color: #fff;
    position: relative;
    z-index: 3; /* above No at start */
  }

  #noBtn{
    background: #ccc;
    color: #000;
    position: static; /* stays in flex until first interaction */
    z-index: 2;
    transition: left 0.35s ease, top 0.35s ease, transform 0.2s ease, opacity 0.4s ease;
  }

  .fade-out{
    opacity: 0;
    transform: translateY(-10px) scale(0.98);
    pointer-events: none;
  }

  /* Success message: always in layout, just hidden -> smooth */
  #success{
    opacity: 0;
    visibility: hidden;
    transition: opacity 700ms ease;
    font-size: 22px;
    line-height: 1.3;
    pointer-events: none;
    will-change: opacity;
  }
  #success.show{
    opacity: 1;
    visibility: visible;
  }

  /* HEART CONFETTI */
  .confetti{
    position: fixed;
    top: -50px;
    pointer-events: none;
    z-index: 9998; /* above acrylic box */
    animation: fall linear forwards;
    will-change: transform, opacity;
  }

  @keyframes fall{
    0%   { transform: translateY(0) translateX(0) rotate(0deg); opacity: 1; }
    50%  { transform: translateY(55vh) translateX(calc(var(--drift) * 0.5)) rotate(180deg); }
    100% { transform: translateY(115vh) translateX(var(--drift)) rotate(360deg); opacity: 0; }
  }
</style>
</head>

<body>

<div class="card">
  <h1 id="question">Vee, will you be my Valentine? ‚ù§Ô∏è</h1>

  <div class="buttons" id="buttons">
    <button id="yesBtn" type="button">Yes üòç</button>
    <button id="noBtn" type="button">No üôÉ</button>
  </div>

  <div id="success">Yayyy ü•π‚ù§Ô∏è<br/>I knew you‚Äôd say yes.</div>
</div>

<audio id="bgMusic" preload="auto" playsinline>
  <source src="blinding-lights.mp3" type="audio/mpeg">
</audio>

<script>
  const noBtn = document.getElementById("noBtn");
  const yesBtn = document.getElementById("yesBtn");
  const question = document.getElementById("question");
  const buttons = document.getElementById("buttons");
  const success = document.getElementById("success");
  const music = document.getElementById("bgMusic");
  const card = document.querySelector(".card");

  let noBtnScale = 1;
  let escaped = false;
  let locked = false;

  function fadeInMusic(audio, duration = 2000) {
    audio.volume = 0;
    const step = 0.04;
    const interval = 25; // stable tick
    const steps = Math.max(1, Math.floor(duration / interval));
    let i = 0;

    const t = setInterval(() => {
      i++;
      audio.volume = Math.min(1, i / steps);
      if (audio.volume >= 1) clearInterval(t);
    }, interval);
  }

  function confettiHearts() {
    const colors = ["#ff4d6d","#ffd166","#06d6a0","#4cc9f0","#c77dff"];

    for (let i = 0; i < 130; i++) {
      const c = document.createElement("div");
      c.className = "confetti";
      c.textContent = "‚ù§Ô∏è";

      c.style.left = (Math.random() * 100) + "vw";
      c.style.fontSize = (12 + Math.random() * 22) + "px";
      c.style.color = colors[Math.floor(Math.random() * colors.length)];

      const drift = (Math.random() * 80 - 40).toFixed(2) + "vw"; // -40vw..+40vw
      c.style.setProperty("--drift", drift);

      const dur = (2.2 + Math.random() * 1.8).toFixed(2);
      c.style.animationDuration = dur + "s";

      document.body.appendChild(c);
      setTimeout(() => c.remove(), (Number(dur) + 0.25) * 1000);
    }
  }

  function hideNoButtonSmooth() {
  const liveNoBtn = document.getElementById("noBtn");
  if (!liveNoBtn) return;

  liveNoBtn.style.pointerEvents = "none";
  liveNoBtn.style.transition = "opacity 0.35s ease, transform 0.35s ease";
  liveNoBtn.style.opacity = "0";
  liveNoBtn.style.transform = (liveNoBtn.style.transform || "") + " scale(0.85)";

  setTimeout(() => {
    liveNoBtn.remove(); // removes it completely wherever it is
  }, 380);
}

  function escapeNoButton(e) {
    e.preventDefault();
    if (locked) return;

    // shrink each attempt
    noBtnScale *= 0.95;
    noBtn.style.transform = `scale(${noBtnScale})`;

    // detach on first interaction so it can move across full page
    if (!escaped) {
      escaped = true;
      const rect = noBtn.getBoundingClientRect();
      document.body.appendChild(noBtn);

      noBtn.style.position = "fixed";
      noBtn.style.left = rect.left + "px";
      noBtn.style.top = rect.top + "px";
      noBtn.style.zIndex = "9999"; // above card + confetti
    }

    const margin = 18;
    const maxX = window.innerWidth - noBtn.offsetWidth - margin;
    const maxY = window.innerHeight - noBtn.offsetHeight - margin;

    const x = Math.random() * Math.max(0, maxX) + margin;
    const y = Math.random() * Math.max(0, maxY) + margin;

    noBtn.style.left = x + "px";
    noBtn.style.top = y + "px";
  }

  // Desktop + Mobile behavior for NO
  noBtn.addEventListener("mouseenter", escapeNoButton);
  noBtn.addEventListener("touchstart", escapeNoButton, { passive: false });

yesBtn.addEventListener("click", async () => {
  if (locked) return;
  locked = true;

  // fade out question + buttons
  question.classList.add("fade-out");
  buttons.classList.add("fade-out");

  // ‚úÖ hide No immediately (even if it escaped already)
  hideNoButtonSmooth();

  // music best-effort
  try {
    music.currentTime = 0;
    await music.play();
    fadeInMusic(music, 2000);
  } catch (_) {}

  setTimeout(() => {
    question.style.display = "none";
    buttons.style.display = "none";

    // show success
    success.style.visibility = "visible";
    success.classList.remove("show");
    success.offsetHeight;
    success.classList.add("show");

    // ‚úÖ confetti starts exactly when success appears
    confettiHearts();
  }, 650);

  // WhatsApp redirect after 15 seconds
  setTimeout(() => {
    const phoneNumber = "2347070278733";
    const message = encodeURIComponent("Yes, I'll be your valentine");
    location.href = `https://wa.me/${phoneNumber}?text=${message}`;
  }, 15000);
});

</script>

</body>
</html>



